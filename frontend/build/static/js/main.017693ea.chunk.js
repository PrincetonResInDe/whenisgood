(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOffset=function(e){var t=(0,o.default)(e).startOf("day");return e.diff(t,"m")},t.getMoment=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e*t+n>=1440)return(0,o.default)({h:23,m:59});return(0,o.default)({h:0,m:0}).add(e*t+n,"m")},t.getNumberOfCells=l,t.getIntervalsByDuration=function(e,t,n){for(var a=l(t,e,!1),r=l(n,e,!0),s=(0,o.default)({h:0,m:0}).add(e*a,"m"),i=void 0,u=[],c=a;c<r;c+=1){i=s.clone().add(e,"m");var d={start:s,end:i};u.push(d),s=i}var f=u.pop();"00:00"===f.end.format("HH:mm")&&(f={start:f.start,end:(0,o.default)({hour:23,minute:59})});return u.push(f),u},t.getDayIntervals=function(e,t){return t.map((function(t){return{start:(0,o.default)(e).hour(t.start.hour()).minute(t.start.minute()).second(0),end:(0,o.default)(e).hour(t.end.hour()).minute(t.end.minute()).second(0)}}))},t.getIntervals=function(e,t){for(var n=t.diff(e,"days"),a=[],r=0;r<=n;r+=1){var l=(0,o.default)(e).add(r,"day"),s=(0,o.default)(e).add(r,"day").hour(t.hour()).minute(t.minute()).second(0);a.push({start:l,end:s})}return a};var a,r=n(13),o=(a=r)&&a.__esModule?a:{default:a};function l(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=(0,o.default)(e).startOf("day").add(a,"m"),l=(0,o.default)(e);"23:59"===l.format("HH:mm")&&l.add(1,"m");var s=n?Math.ceil(l.diff(r,"m")/t):Math.floor(l.diff(r,"m")/t);return s<0?0:s}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=y(n(0)),l=y(n(10)),s=y(n(13)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(17)),u=y(n(31)),c=y(n(32)),d=y(n(34)),f=y(n(35)),p=y(n(36)),h=y(n(37)),v=y(n(38)),m=n(39);function y(e){return e&&e.__esModule?e:{default:e}}var b={firstDay:l.default.object,numberOfDays:l.default.number,scaleHeaderTitle:l.default.string,headerCellComponent:l.default.func,dayFormat:l.default.string,startTime:l.default.object,endTime:l.default.object,scaleUnit:l.default.number,scaleFormat:l.default.string,cellHeight:l.default.number,dayCellComponent:l.default.func,selectedIntervals:l.default.array,onIntervalSelect:l.default.func,onIntervalUpdate:l.default.func,onIntervalRemove:l.default.func,eventComponent:l.default.func,onEventClick:l.default.func,modalComponent:l.default.func,useModal:l.default.bool,showModalCase:l.default.arrayOf(l.default.string),eventSpacing:l.default.number},j={firstDay:(0,s.default)(),numberOfDays:7,scaleHeaderTitle:"",headerCellComponent:f.default,dayFormat:"dd., DD.MM",startTime:(0,s.default)({h:0,m:0}),endTime:(0,s.default)({h:23,m:59}),scaleUnit:15,scaleFormat:"HH:mm",cellHeight:25,dayCellComponent:p.default,selectedIntervals:[],eventComponent:h.default,modalComponent:v.default,useModal:!0,showModalCase:[m.ACTION_TYPES.CREATE,m.ACTION_TYPES.EDIT],eventSpacing:15},O=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));g.call(n);var a=e.scaleUnit,r=e.startTime,o=e.endTime,l=i.getIntervalsByDuration(a,r,o);return n.state={scaleIntervals:l,columnDimensions:[],scrollPosition:{top:0,left:0},startSelectionPosition:null,preselectedInterval:null},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.calculateColumnDimension(),window.addEventListener("resize",this.calculateColumnDimension),window.addEventListener("mouseup",this.handleSelectionStop)}},{key:"componentWillReceiveProps",value:function(e){if(e.scaleUnit!==this.props.scaleUnit||e.startTime!==this.props.startTime||e.endTime!==this.props.endTime){var t=i.getIntervalsByDuration(e.scaleUnit,e.startTime,e.endTime);this.setState({scaleIntervals:t})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.calculateColumnDimension),window.removeEventListener("mouseup",this.handleSelectionStop)}},{key:"renderSelectedIntervals",value:function(){var e=this,t=this.props,n=t.firstDay,a=t.numberOfDays,r=t.cellHeight,l=t.scaleUnit,u=t.selectedIntervals,c=t.eventSpacing,d=this.state,f=d.columnDimensions,p=d.scaleIntervals,h=[];if(0===f.length||0===u.length)return h;for(var v=this.props.eventComponent,m=i.getOffset(p[0].start),y=[],b=function(t){var a=(0,s.default)(n).startOf("day").add(t,"day"),d=u.filter((function(e){return e.start.isSame(a,"day")||e.end.isSame(a,"day")}));if(d.length>0){d.sort((function(e,t){return e.start.diff(t.start,"minutes")}));var b=[],j=null;d.forEach((function(e){"event"==e.type?null==j?j=e:j.end.isBefore(e.start)?(b.push(j),j=e):j.end.isBefore(e.end)&&(j.end=e.end):b.push(e)})),null!=j&&b.push(j),(d=b).sort((function(e,t){return e.start.diff(t.start,"minutes")})),y.push.apply(y,d),d.forEach((function(n,s,u){var d=0;if(n.start.isBefore(a)||(d=i.getNumberOfCells(n.start,l,!1,m)),!(d>p.length)){var y=u.filter((function(e,t){return t<s&&"gcalevent"==n.type&&n.start.isBefore(e.end)})).length,b=u.filter((function(e,t){return t>s&&"gcalevent"==n.type&&n.end.isAfter(e.start)})).length,j=u.filter((function(e,t){return"gcalevent"==n.type&&"event"==e.type&&(t<s&&n.start.isBefore(e.end)||t>s&&n.end.isAfter(e.start))})).length,O=y+b+1-Math.max(0,j-1),g=i.getNumberOfCells(n.end,l,!0,m);g>p.length&&(g=p.length);var _,E=d*r;_="event"==n.type?f[t].width-c:(f[t].width-c)/O;var C={top:E,left:f[t].left+(_+Math.floor(c/O))*(y+Math.max(0,j-1)),width:_,height:(g-d)*r},S=o.default.createElement("div",{className:"weekCalendar__overlay",key:2e4*t+s,style:C,onClick:e.handleEventClick.bind(e,n)},o.default.createElement(v,n));h.push(S)}}))}},j=0;j<a;j+=1)b(j);return t.setSelectedIntervals(y),h}},{key:"renderOverlay",value:function(){if(null!=this.state.startSelectionPosition){var e=this.state.startSelectionPosition,t=this.state.mousePosition,n=Math.min(e.y,t.y)*this.props.cellHeight,a=this.state.columnDimensions[Math.min(e.x,t.x)].left,r=this.state.columnDimensions[Math.max(e.x,t.x)],l={top:n,left:a,width:r.left-a+r.width,height:(Math.max(e.y,t.y)+1)*this.props.cellHeight-n};return o.default.createElement("div",{className:"weekCalendar__overlay weekCalendar__overlay_status_selection",style:l})}return null}},{key:"renderModal",value:function(){var e=this.props,t=e.useModal,n=e.showModalCase,r=this.state,l=r.preselectedInterval,s=r.updateEvent?m.ACTION_TYPES.EDIT:m.ACTION_TYPES.CREATE;if(l&&t&&n.includes(s)){var i=this.props.modalComponent;return o.default.createElement("div",{className:"calendarModal"},o.default.createElement("div",{className:"calendarModal__backdrop",onClick:this.closeModule}),o.default.createElement("div",{className:"calendarModal__content"},o.default.createElement(i,a({},l,{onRemove:this.removePreselectedInterval,onSave:this.submitPreselectedInterval,actionType:s}))))}return null}},{key:"render",value:function(){var e=this.props,t=e.firstDay,n=e.numberOfDays,a=e.headerCellComponent,r=e.dayFormat,l=e.scaleUnit,s=e.scaleFormat,i=e.cellHeight,f=e.dayCellComponent,p=e.scaleHeaderTitle,h=null!=this.state.startSelectionPosition;return o.default.createElement("div",{className:h?"weekCalendar weekCalendar__status_selection":"weekCalendar"},o.default.createElement("div",{className:"weekCalendar__scaleHeader"},o.default.createElement("span",null,p)),o.default.createElement("div",{className:"weekCalendar__header",style:{left:-this.state.scrollPosition.left}},o.default.createElement(u.default,{firstDay:t,numberOfDays:n,dayFormat:r,columnDimensions:this.state.columnDimensions,headerCellComponent:a})),o.default.createElement("div",{className:"weekCalendar__scaleColumn",style:{top:-this.state.scrollPosition.top}},o.default.createElement(d.default,{scaleUnit:this.props.scaleUnit,scaleFormat:s,scaleIntervals:this.state.scaleIntervals,cellHeight:this.props.cellHeight})),o.default.createElement("div",{className:"weekCalendar__content",onScroll:this.handleScroll},o.default.createElement(c.default,{firstDay:t,numberOfDays:n,scaleUnit:l,scaleIntervals:this.state.scaleIntervals,cellHeight:i,dayCellComponent:f,onSelectionStart:this.handleSelectionStart,onCellMouseEnter:this.handleCellMouseEnter}),this.renderSelectedIntervals(),this.renderOverlay()),this.renderModal())}}]),t}(o.default.Component),g=function(){var e=this;this.calculateColumnDimension=function(){for(var t=e.props.numberOfDays,n=[],a=0;a<t;a+=1){var r=0===a?0:n[a-1].left+n[a-1].width,o=0,l=document.querySelectorAll("[data-colpos='"+a+"']")[0];l&&(o=l.getBoundingClientRect().width),n.push({left:r,width:o})}e.setState({columnDimensions:n})},this.handleScroll=function(t){e.setState({scrollPosition:{top:t.target.scrollTop,left:t.target.scrollLeft}})},this.handleCellMouseEnter=function(t,n){null!=e.state.startSelectionPosition&&e.setState({mousePosition:{x:t,y:n}})},this.handleSelectionStart=function(t,n){var a={x:t,y:n};e.setState({startSelectionPosition:a,mousePosition:a})},this.handleSelectionStop=function(t){if(0===t.button){var n=e.props,a=n.firstDay,r=n.scaleUnit,o=n.useModal,l=n.showModalCase,u=e.state,c=u.startSelectionPosition,d=u.mousePosition,f=u.scaleIntervals;if(null!=c){var p=d.x,h=d.y,v=Math.min(c.x,p),y=Math.max(c.x,p),b=(0,s.default)(a).add(v,"days"),j=(0,s.default)(a).add(y,"days"),O=Math.min(c.y,h),g=Math.max(c.y,h)+1,_=i.getOffset(f[0].start),E=i.getMoment(r,O,_),C=i.getMoment(r,g,_),S=(0,s.default)(b).hour(E.hour()).minute(E.minute()).second(0),w=(0,s.default)(j).hour(C.hour()).minute(C.minute()).second(0);if(o&&l.includes(m.ACTION_TYPES.CREATE)){var D={start:S,end:w};e.setState({preselectedInterval:D,updateEvent:!1})}else{var I=i.getIntervals(S,w);e.props.onIntervalSelect&&e.props.onIntervalSelect(I)}e.setState({startSelectionPosition:null,mousePosition:null})}}},this.removePreselectedInterval=function(){var t=e.state,n=t.preselectedInterval;t.updateEvent&&e.props.onIntervalRemove&&e.props.onIntervalRemove(n),e.setState({preselectedInterval:null})},this.submitPreselectedInterval=function(t){var n=e.state,r=n.preselectedInterval;if(n.updateEvent)e.props.onIntervalUpdate&&e.props.onIntervalUpdate(a({},r,t));else if(e.props.onIntervalSelect){var o=i.getIntervals(r.start,r.end).map((function(e){return a({},e,t)}));e.props.onIntervalSelect(o)}e.setState({preselectedInterval:null})},this.closeModule=function(){e.setState({preselectedInterval:null})},this.handleEventClick=function(t){e.props.onEventClick&&e.props.onEventClick(t),e.setState({preselectedInterval:t,updateEvent:!0})}};O.propTypes=b,O.defaultProps=j,t.default=O},,,,,function(e,t,n){},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarHeader=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=s(n(0)),o=s(n(10)),l=s(n(13));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var c={firstDay:o.default.object.isRequired,numberOfDays:o.default.number.isRequired,headerCellComponent:o.default.func.isRequired,dayFormat:o.default.string.isRequired,columnDimensions:o.default.array.isRequired},d=t.CalendarHeader=function(e){function t(){return i(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return e.numberOfDays!==this.props.numberOfDays||!e.firstDay.isSame(this.props.firstDay,"day")||e.columnDimensions!==this.props.columnDimensions}},{key:"render",value:function(){var e=this.props,t=e.firstDay,n=e.numberOfDays,a=e.dayFormat,o=e.columnDimensions,s=this.props.headerCellComponent;if(0===o.length)return null;for(var i=[],u=0,c=0;c<n;c+=1){var d=(0,l.default)(t).add(c,"d"),f=o[c].width;u+=f;var p=r.default.createElement("div",{key:c,className:"weekCalendar__headerColumn",style:{width:f}},r.default.createElement(s,{date:d,dayFormat:a}));i.push(p)}return r.default.createElement("div",{style:{width:u},className:"weekCalendar__headerWrapper"},i)}}]),t}(r.default.Component);d.propTypes=c,t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=u(n(0)),o=u(n(10)),l=u(n(13)),s=u(n(33)),i=n(17);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var f={firstDay:o.default.object.isRequired,numberOfDays:o.default.number.isRequired,scaleUnit:o.default.number.isRequired,scaleIntervals:o.default.array.isRequired,cellHeight:o.default.number.isRequired,dayCellComponent:o.default.func.isRequired,onSelectionStart:o.default.func.isRequired,onCellMouseEnter:o.default.func.isRequired},p=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return e.scaleUnit!==this.props.scaleUnit||e.cellHeight!==this.props.cellHeight||e.numberOfDays!==this.props.numberOfDays||!e.firstDay.isSame(this.props.firstDay,"day")}},{key:"render",value:function(){for(var e=this.props,t=e.firstDay,n=e.numberOfDays,a=e.scaleUnit,o=e.scaleIntervals,u=e.cellHeight,c=e.dayCellComponent,d=[],f=0;f<n;f+=1){var p=(0,l.default)(t).add(f,"d"),h=(0,i.getDayIntervals)(p,o);d.push(r.default.createElement(s.default,{key:f,colPos:f,cellHeight:u,dayCellComponent:c,scaleUnit:a,dayIntervals:h,onSelectionStart:this.props.onSelectionStart,onCellMouseEnter:this.props.onCellMouseEnter}))}return r.default.createElement("div",{className:"calendarBody"},r.default.createElement("div",{className:"calendarBody__row"},d))}}]),t}(r.default.Component);p.propTypes=f,t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=l(n(0)),o=l(n(10));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var u={colPos:o.default.number.isRequired,dayIntervals:o.default.array.isRequired,cellHeight:o.default.number.isRequired,dayCellComponent:o.default.func.isRequired,onSelectionStart:o.default.func.isRequired,onCellMouseEnter:o.default.func.isRequired},c=function(e){function t(){var e,n,a;s(this,t);for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.handleMouseEnter=function(e,t){return function(){a.props.onCellMouseEnter(e,t)}},a.handleStartSelection=function(e,t){return function(){a.props.onSelectionStart(e,t)}},i(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.cellHeight,a=t.colPos,o=t.dayIntervals,l=this.props.dayCellComponent,s=o.map((function(t,o){return r.default.createElement("div",{key:o,className:"calendarBody__cell",style:{height:n},onMouseEnter:e.handleMouseEnter(a,o)},r.default.createElement(l,{colPos:a,rowPos:o,startTime:t.start,endTime:t.end,cellHeight:e.props.cellHeight,startSelection:e.handleStartSelection(a,o)}))}));return r.default.createElement("div",{className:"calendarBody__column","data-colpos":a},s)}}]),t}(r.default.Component);c.propTypes=u,t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=l(n(0)),o=l(n(10));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var u={scaleUnit:o.default.number.isRequired,scaleFormat:o.default.string.isRequired,scaleIntervals:o.default.array.isRequired,cellHeight:o.default.number.isRequired},c=function(e){function t(){return s(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"shouldComponentUpdate",value:function(e){return e.scaleUnit!==this.props.scaleUnit||e.cellHeight!==this.props.cellHeight}},{key:"renderScaleCell",value:function(e,t){var n=this.props,a=n.cellHeight,o=n.scaleFormat;return r.default.createElement("div",{key:t,className:"weekCalendar__scaleCell",style:{height:a,lineHeight:a+"px"}},r.default.createElement("span",null,e.start.format(o)))}},{key:"render",value:function(){var e=this,t=this.props.scaleIntervals;return r.default.createElement("div",null,t.map((function(t,n){return e.renderScaleCell(t,n)})))}}]),t}(r.default.Component);c.propTypes=u,t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=l(n(0)),o=l(n(10));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var u={date:o.default.object.isRequired,dayFormat:o.default.string.isRequired},c=function(e){function t(){return s(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.date,n=e.dayFormat;return r.default.createElement("span",{className:"title"},t.format(n))}}]),t}(r.default.PureComponent);c.propTypes=u,t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var i={startSelection:o(n(10)).default.func.isRequired},u=function(e){function t(){var e,n,a;l(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.handleMouseDown=function(e){0===e.button&&a.props.startSelection()},s(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){return r.default.createElement("div",{onMouseDown:this.handleMouseDown,className:"dayCell",role:"presentation"},"\xa0")}}]),t}(r.default.Component);u.propTypes=i,t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=l(n(0)),o=l(n(10));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var u={start:o.default.object.isRequired,end:o.default.object.isRequired},c=function(e){function t(){return s(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.start,a=e.end,o=e.value;return r.default.createElement("div",{className:t},r.default.createElement("span",null,n.format("HH:mm")+" - "+a.format("HH:mm")),r.default.createElement("br",null),r.default.createElement("br",null),o)}}]),t}(r.default.PureComponent);c.propTypes=u,t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=l(n(0)),o=l(n(10));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var u={start:o.default.object.isRequired,end:o.default.object.isRequired,value:o.default.string,onRemove:o.default.func.isRequired,onSave:o.default.func.isRequired,actionType:o.default.string},c=function(e){function t(){var e,n,a;s(this,t);for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];return n=a=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.handleRemove=function(){a.props.onRemove()},a.handleSave=function(){var e=a.input.value;a.props.onSave({value:e})},i(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"renderText",value:function(){var e=this.props,t=e.start,n=e.end;return t.isSame(n,"day")?r.default.createElement("span",null,t.format("Do MMM., HH:mm")+" - "+n.format("HH:mm")):r.default.createElement("span",null,t.format("Do MMM.")+" - "+n.format("Do MMM.")+", "+t.format("HH:mm")+" - "+n.format("HH:mm"))}},{key:"render",value:function(){var e=this,t=this.props.value;return r.default.createElement("div",{className:"customModal"},r.default.createElement("div",{className:"customModal__text"},this.renderText()),r.default.createElement("input",{ref:function(t){e.input=t},className:"customModal__input",type:"text",placeholder:"Enter something",defaultValue:t}),r.default.createElement("button",{className:"customModal__button",onClick:this.handleRemove},"Delete"),r.default.createElement("button",{className:"customModal__button customModal__button_float_right",onClick:this.handleSave},"Save"))}}]),t}(r.default.Component);c.propTypes=u,c.defaultProps={value:""},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ACTION_TYPES={CREATE:"create",EDIT:"edit"}},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),l=n.n(o),s=(n(24),n(6)),i=n(7),u=n(9),c=n(8),d=n(3),f=n(2),p=n(11),h=n(1),v=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"render",value:function(){var e="/respond/"+this.props.event.UUID;return Object(h.jsxs)("div",{children:[Object(h.jsxs)(p.b,{to:e,children:[this.props.event.name," - ",this.props.event.description]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{})]})}}]),n}(r.a.Component),m=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(s.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"render",value:function(){var e=[];return this.props.events.forEach((function(t){e.push(Object(h.jsx)(v,{event:t},t.UUID))})),Object(h.jsxs)("div",{style:{padding:"10px"},children:[Object(h.jsx)("h1",{children:"My Events"}),Object(h.jsx)(p.b,{to:"/create",children:Object(h.jsx)("h3",{children:"Create new event"})}),Object(h.jsx)("br",{}),e]})}}]),n}(r.a.Component),y=n(16),b=n(4),j=n.n(b),O=n(19),g=n.n(O),_=window.gapi,E="1061583639488-bdq4tj8c6s0fnhi9j8sqnavl9lg7goqp.apps.googleusercontent.com",C="AIzaSyC6QyV6gGcWALwMIKdhBgAzgks_Iel54Zk",S=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],w="https://www.googleapis.com/auth/calendar.events",D=null,I=null,M=function(e,t){_.load("client:auth2",(function(){D=e,I=t,_.client.init({apiKey:C,clientId:E,discoveryDocs:S,scope:w}).then((function(){_.auth2.getAuthInstance().isSignedIn.listen(x),x(_.auth2.getAuthInstance().isSignedIn.get())}),(function(e){}))}))},P=function(e){_.auth2.getAuthInstance().signIn()};function x(e){e&&_.client.calendar.events.list({calendarId:"primary",timeMin:j()(D.event.startDate).format(),timeMax:j()(D.event.endDate).format(),singleEvents:!0,orderBy:"startTime"}).then((function(e){e.result.items.forEach((function(e){D.selectedIntervals.push({uid:D.lastUid,start:j()(e.start.dateTime),end:j()(e.end.dateTime),value:e.summary,type:"gcalevent"}),D.lastUid++})),I()}))}var T=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleEventRemove=function(e){var t=a.state.selectedIntervals,n=t.findIndex((function(t){return t.uid===e.uid}));n>-1&&(t.splice(n,1),a.setState({selectedIntervals:t}))},a.handleEventUpdate=function(e){var t=a.state.selectedIntervals,n=t.findIndex((function(t){return t.uid===e.uid}));n>-1&&(t[n]=e,a.setState({selectedIntervals:t}))},a.handleSelect=function(e){var t=a.state,n=t.lastUid,r=t.selectedIntervals,o=e.map((function(e,t){return Object(y.a)(Object(y.a)({},e),{},{type:"event",uid:n+t})}));a.setState({selectedIntervals:r.concat(o),lastUid:n+e.length})},a.setSelectedIntervals=function(e){a.state.selectedIntervals.length=0,e.forEach((function(e){a.state.selectedIntervals.push(e)}))},a.state={loaded:!1,gcalLoaded:!1,lastUid:0,selectedIntervals:[],event:a.props.event},a.updateAvailabilities=a.updateAvailabilities.bind(Object(d.a)(a)),a.setSelectedIntervals=a.setSelectedIntervals.bind(Object(d.a)(a)),a.setGcalLoaded=a.setGcalLoaded.bind(Object(d.a)(a)),a}return Object(i.a)(n,[{key:"setGcalLoaded",value:function(){console.log("gcal loaded"),this.setState({gcalLoaded:!0})}},{key:"componentDidMount",value:function(){var e=this,t={sp_name:"getAvailabilities",params:[this.state.event.UUID]};fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){t.forEach((function(t){e.state.selectedIntervals.push({uid:e.state.lastUid,start:j()(t.startTime),end:j()(t.endTime),value:"",type:"event"}),e.state.lastUid++}))})).then((function(t){M(e.state,e.setGcalLoaded),e.setState({loaded:!0})}))}},{key:"updateAvailabilities",value:function(){var e=this,t={sp_name:"deleteAvailabilities",params:[this.state.event.UUID]};fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){e.state.selectedIntervals.forEach((function(t){if("event"==t.type){var n={sp_name:"addAvailability",params:[e.state.event.UUID,t.start.clone().utc().format("YYYY-M-D HH:mm:ss"),t.end.clone().utc().format("YYYY-M-D HH:mm:ss")]};fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}}))}))}},{key:"render",value:function(){return this.state.loaded?Object(h.jsxs)("div",{children:[Object(h.jsx)(g.a,{startTime:j()({h:7,m:0}),endTime:j()({h:22,m:15}),firstDay:j()(this.state.event.startDate).add(1,"days"),numberOfDays:j()(this.state.event.endDate).diff(j()(this.state.event.startDate),"days")+1,scaleFormat:"HH:mm",dayFormat:"ddd. MM.DD",useModal:!1,selectedIntervals:this.state.selectedIntervals,onIntervalSelect:this.handleSelect,onIntervalUpdate:this.handleEventUpdate,onIntervalRemove:this.handleEventRemove,setSelectedIntervals:this.setSelectedIntervals,onEventClick:this.handleEventRemove,eventSpacing:0}),Object(h.jsxs)("div",{style:{textAlign:"right",padding:"10px"},children:[Object(h.jsx)("button",{class:"bluebutton",onClick:P,disabled:this.state.gcalLoaded,children:"Load Google Calendar"}),Object(h.jsx)("button",{class:"greenbutton",onClick:this.updateAvailabilities,children:"Save"})]})]}):Object(h.jsx)("div",{})}}]),n}(r.a.Component);function k(e){var t=Object(f.h)().UUID,n=e.events.find((function(e){return e.UUID===t}));return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)("h1",{children:n.name}),Object(h.jsx)("h3",{children:n.description})]}),Object(h.jsx)(T,{event:n})]})}var R=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={name:"",description:"",startDate:"",endDate:"",redirect:!1},a.addEvent=a.addEvent.bind(Object(d.a)(a)),a.handleName=a.handleName.bind(Object(d.a)(a)),a.handleDescription=a.handleDescription.bind(Object(d.a)(a)),a.handleStartDate=a.handleStartDate.bind(Object(d.a)(a)),a.handleEndDate=a.handleEndDate.bind(Object(d.a)(a)),a.setRedirect=a.setRedirect.bind(Object(d.a)(a)),a}return Object(i.a)(n,[{key:"setRedirect",value:function(){this.setState({redirect:!0})}},{key:"addEvent",value:function(e){var t=this;if(e.preventDefault(),""!=this.state.name&&""!=this.state.startDate&&""!=this.state.endDate){var n={sp_name:"addEvent",params:[this.state.name,this.state.description,this.state.startDate,this.state.endDate,0]};fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){t.props.refresh(t.setRedirect)}))}}},{key:"handleName",value:function(e){this.setState({name:e.target.value})}},{key:"handleDescription",value:function(e){this.setState({description:e.target.value})}},{key:"handleStartDate",value:function(e){this.setState({startDate:e.target.value})}},{key:"handleEndDate",value:function(e){this.setState({endDate:e.target.value})}},{key:"render",value:function(){var e=this;return this.state.redirect?Object(h.jsx)(f.a,{to:"/"}):Object(h.jsxs)("div",{style:{padding:"10px"},children:[Object(h.jsx)("h1",{children:"Create New Event"}),Object(h.jsxs)("form",{onSubmit:function(t){return e.addEvent(t)},children:[Object(h.jsx)("p",{children:"Name:"}),Object(h.jsx)("p",{children:Object(h.jsx)("input",{type:"text",value:this.state.name,onChange:this.handleName})}),Object(h.jsx)("p",{children:"Description:"}),Object(h.jsx)("p",{children:Object(h.jsx)("input",{type:"text",value:this.state.description,onChange:this.handleDescription})}),Object(h.jsx)("p",{children:"Start Date:"}),Object(h.jsx)("p",{children:Object(h.jsx)("input",{type:"date",value:this.state.startDate,onChange:this.handleStartDate})}),Object(h.jsx)("p",{children:"End Date:"}),Object(h.jsx)("p",{children:Object(h.jsx)("input",{type:"date",value:this.state.endDate,onChange:this.handleEndDate})}),Object(h.jsx)("p",{children:Object(h.jsx)("input",{type:"submit",class:"greenbutton",value:"Submit"})})]})]})}}]),n}(r.a.Component),H=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={events:[],loaded:!1},a.getEvents=a.getEvents.bind(Object(d.a)(a)),a}return Object(i.a)(n,[{key:"getEvents",value:function(e){var t=this;fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sp_name:"getEvents",params:[]})}).then((function(e){return e.json()})).then((function(n){t.setState({events:[]}),n.forEach((function(e){t.state.events.push(e)})),t.setState({loaded:!0}),e()}))}},{key:"componentDidMount",value:function(){this.getEvents((function(){}))}},{key:"render",value:function(){var e=this.state,t=e.events;return e.loaded?Object(h.jsx)("div",{children:Object(h.jsxs)(f.d,{children:[Object(h.jsx)(f.b,{path:"/",element:Object(h.jsx)(m,{events:t})}),Object(h.jsx)(f.b,{path:"/respond/:UUID",element:Object(h.jsx)(k,{events:t})}),Object(h.jsx)(f.b,{path:"/create",element:Object(h.jsx)(R,{refresh:this.getEvents})})]})}):Object(h.jsx)("div",{})}}]),n}(r.a.Component),U=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(H,{})})}}]),n}(r.a.Component),N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),o(e),l(e)}))};l.a.render(Object(h.jsxs)(p.a,{children:[Object(h.jsx)(U,{})," "]}),document.getElementById("root")),N()}],[[40,1,2]]]);
//# sourceMappingURL=main.017693ea.chunk.js.map